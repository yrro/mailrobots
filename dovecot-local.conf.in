verbose_proctitle = yes

# These are overridden by individual account lookups
mail_uid = mailstorage
mail_gid = mailstorage

# These aren't strictly necessary, since our password database shouldn't be
# returning uid/gid information
first_valid_uid = @mailstorage_uid@
last_valid_uid = @mailstorage_uid@
first_valid_gid = @mailstorage_gid@
last_valid_gid = @mailstorage_gid@

ssl = required
ssl_cert = </etc/dovecot/ssl/imap-LE-cert+chain.pem
ssl_key = </etc/dovecot/ssl/imap-LE-key.pem
ssl_cipher_list = HIGH:!DSS:!aNULL

passdb {
    driver = passwd-file
    args = scheme=crypt /srv/mail/passwd
}

userdb {
    driver = passwd-file
    args = /srv/mail/passwd
}

lmtp_save_to_detail_mailbox = yes

plugin {
    recipient_delimiter = +-
}

postmaster_address = postmaster@@mailname@

service lmtp {
    unix_listener lmtp {
        mode = 0660
        group = Debian-exim
    }
}

service auth {
    unix_listener auth-smtp {
        mode = 0660
        group = Debian-exim
    }
}
